<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>设计模式(01)-面向对象设计原则 - Alen</title><meta name="Description" content="Make it a better place"><meta property="og:title" content="设计模式(01)-面向对象设计原则" />
<meta property="og:description" content="对于面向对象软件系统的设计而言，在支持可维护性的同时，提高系统的可复用性是一个至关重要的问题，如何同时提高一个软件系统的可维护性和可复用性是" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" /><meta property="og:image" content="https://static.alenhy.com/alen_avatar.jpeg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-22T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-09-22T00:00:00&#43;00:00" /><meta property="og:site_name" content="Alen" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://static.alenhy.com/alen_avatar.jpeg"/>

<meta name="twitter:title" content="设计模式(01)-面向对象设计原则"/>
<meta name="twitter:description" content="对于面向对象软件系统的设计而言，在支持可维护性的同时，提高系统的可复用性是一个至关重要的问题，如何同时提高一个软件系统的可维护性和可复用性是"/>
<meta name="application-name" content="Alen">
<meta name="apple-mobile-web-app-title" content="Alen"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="https://static.alenhy.com/alen_avatar.jpeg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" /><link rel="prev" href="http://example.org/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AF%87/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "设计模式(01)-面向对象设计原则",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/posts\/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99\/"
        },"genre": "posts","keywords": "设计模式, 面向对象, 抽象","wordcount":  4021 ,
        "url": "http:\/\/example.org\/posts\/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99\/","datePublished": "2022-09-22T00:00:00+00:00","dateModified": "2022-09-22T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Alen"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Alen"><span class="header-title-pre">(՞• •՞)</span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="请输入搜索内容～" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Alen"><span class="header-title-pre">(՞• •՞)</span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="请输入搜索内容～" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">设计模式(01)-面向对象设计原则</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Alen</a></span>&nbsp;<span class="post-category">included in <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>设计模式</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-09-22">2022-09-22</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;4021 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;9 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#11面向对象设计原则表">1.1面向对象设计原则表</a>
      <ul>
        <li><a href="#12-单一职责原则">1.2 单一职责原则</a></li>
      </ul>
    </li>
    <li><a href="#13-开闭原则">1.3 开闭原则</a>
      <ul>
        <li><a href="#131-平铺式设计">1.3.1 平铺式设计</a></li>
        <li><a href="#132-开闭原则设计">1.3.2 开闭原则设计</a></li>
        <li><a href="#133-接口的意义">1.3.3 接口的意义</a></li>
      </ul>
    </li>
    <li><a href="#14-依赖倒转原则">1.4 依赖倒转原则</a>
      <ul>
        <li><a href="#141--耦合度极高的模块关系设计">1.4.1  耦合度极高的模块关系设计</a></li>
        <li><a href="#142-面向抽象层依赖倒转">1.4.2 面向抽象层依赖倒转</a></li>
        <li><a href="#143-合成复用原则">1.4.3 合成复用原则</a></li>
        <li><a href="#144-迪米特法则">1.4.4 迪米特法则</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><ul>
<li>
<p>对于面向对象软件系统的设计而言，在支持可维护性的同时，提高系统的可复用性是一个至关重要的问题，如何同时提高一个软件系统的可维护性和可复用性是面向对象设计需要解决的核心问题之一。在面向对象设计中，可维护性的复用是以设计原则为基础的。每一个原则都蕴含一些面向对象设计的思想，可以从不同的角度提升一个软件结构的设计水平。</p>
</li>
<li>
<p>面向对象设计原则为支持可维护性复用而诞生，这些原则蕴含在很多设计模式中，它们是从许多设计方案中总结出的指导性原则。面向对象设计原则也是我们用于评价一个设计模式的使用效果的重要指标之一。</p>
</li>
</ul>
<blockquote>
<p>原则的目的： 高内聚，低耦合。</p>
</blockquote>
<h2 id="11面向对象设计原则表">1.1面向对象设计原则表</h2>
<table>
<thead>
<tr>
<th>名称</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr>
<td>单一职责原则(Single Responsibility Principle, SRP)★★★★☆</td>
<td>类的职责单一，对外只提供一种功能，而引起类变化的原因都应该只有一个。</td>
</tr>
<tr>
<td>开闭原则(Open-Closed Principle, OCP)★★★★★</td>
<td>类的改动是通过增加代码进行的，而不是修改源代码。</td>
</tr>
<tr>
<td>里氏代换原则(Liskov Substitution Principle, LSP★★★★★</td>
<td>任何抽象类（interface接口）出现的地方都可以用他的实现类进行替换，实际就是虚拟机制，语言级别实现面向对象功能。</td>
</tr>
<tr>
<td>依赖倒转原则(Dependence Inversion Principle, DIP)★★★★★</td>
<td>依赖于抽象(接口)，不要依赖具体的实现(类)，也就是针对接口编程。</td>
</tr>
<tr>
<td>接口隔离原则(Interface Segregation Principle, ISP★★☆☆☆</td>
<td>不应该强迫用户的程序依赖他们不需要的接口方法。一个接口应该只提供一种对外功能，不应该把所有操作都封装到一个接口中去。</td>
</tr>
<tr>
<td>合成复用原则(Composite Reuse Principle, CRP)★★★★☆</td>
<td>如果使用继承，会导致父类的任何变换都可能影响到子类的行为。如果使用对象组合，就降低了这种依赖关系。对于继承和组合，优先使用组合。</td>
</tr>
<tr>
<td>迪米特法则(Law of Demeter, LoD★★★☆☆</td>
<td>一个对象应当对其他对象尽可能少的了解，从而降低各个对象之间的耦合，提高系统的可维护性。例如在一个程序中，各个模块之间相互调用时，通常会提供一个统一的接口来实现。这样其他模块不需要了解另外一个模块的内部实现细节，这样当一个模块内部的实现发生改变时，不会影响其他模块的使用。（黑盒原理）</td>
</tr>
</tbody>
</table>
<h3 id="12-单一职责原则">1.2 单一职责原则</h3>
<p>类的职责单一，对外只提供一种功能，而引起类变化的原因都应该只有一个。</p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">ClothesShop</span> <span class="kd">struct</span> <span class="p">{}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">cs</span> <span class="o">*</span><span class="nx">ClothesShop</span><span class="p">)</span> <span class="nf">OnShop</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;休闲的装扮&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">ClothesWork</span> <span class="kd">struct</span> <span class="p">{}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">cw</span> <span class="o">*</span><span class="nx">ClothesWork</span><span class="p">)</span> <span class="nf">OnWork</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;工作的装扮&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//工作的时候
</span><span class="c1"></span>        <span class="nx">cw</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">ClothesWork</span><span class="p">)</span>
        <span class="nx">cw</span><span class="p">.</span><span class="nf">OnWork</span><span class="p">()</span>

        <span class="c1">//shopping的时候
</span><span class="c1"></span>        <span class="nx">cs</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">ClothesShop</span><span class="p">)</span>
        <span class="nx">cs</span><span class="p">.</span><span class="nf">OnShop</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><p>在面向对象编程的过程中，设计一个类，建议对外提供的功能单一，接口单一，影响一个类的范围就只限定在这一个接口上，一个类的一个接口具备这个类的功能含义，职责单一不复杂。</p>
<h2 id="13-开闭原则">1.3 开闭原则</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFiMTE4MjllNDViOTBkMjQ4Mjg2ZDllY2EyNTFhYjFfdnBlQUdJcW5yYzFaZUJRZmwyUkRETDhmSnRoMDFqbFZfVG9rZW46Ym94Y25zQ3NSOEM1YzdMNExmc3VCRHRYejNoXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFiMTE4MjllNDViOTBkMjQ4Mjg2ZDllY2EyNTFhYjFfdnBlQUdJcW5yYzFaZUJRZmwyUkRETDhmSnRoMDFqbFZfVG9rZW46Ym94Y25zQ3NSOEM1YzdMNExmc3VCRHRYejNoXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFiMTE4MjllNDViOTBkMjQ4Mjg2ZDllY2EyNTFhYjFfdnBlQUdJcW5yYzFaZUJRZmwyUkRETDhmSnRoMDFqbFZfVG9rZW46Ym94Y25zQ3NSOEM1YzdMNExmc3VCRHRYejNoXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFiMTE4MjllNDViOTBkMjQ4Mjg2ZDllY2EyNTFhYjFfdnBlQUdJcW5yYzFaZUJRZmwyUkRETDhmSnRoMDFqbFZfVG9rZW46Ym94Y25zQ3NSOEM1YzdMNExmc3VCRHRYejNoXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=YmFiMTE4MjllNDViOTBkMjQ4Mjg2ZDllY2EyNTFhYjFfdnBlQUdJcW5yYzFaZUJRZmwyUkRETDhmSnRoMDFqbFZfVG9rZW46Ym94Y25zQ3NSOEM1YzdMNExmc3VCRHRYejNoXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<h3 id="131-平铺式设计">1.3.1 平铺式设计</h3>
<p>那么作为<code>interface</code>数据类型，他存在的意义在哪呢？ 实际上是为了满足一些面向对象的编程思想。我们知道，软件设计的最高目标就是<code>高内聚，低耦合</code>。那么其中有一个设计原则叫<code>开闭原则</code>。什么是开闭原则呢，接下来我们看一个例子：</p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//我们要写一个类,Banker银行业务员
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Banker</span> <span class="kd">struct</span> <span class="p">{</span>
<span class="p">}</span>

<span class="c1">//存款业务
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">this</span> <span class="o">*</span><span class="nx">Banker</span><span class="p">)</span> <span class="nf">Save</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span> <span class="s">&#34;进行了 存款业务...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//转账业务
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">this</span> <span class="o">*</span><span class="nx">Banker</span><span class="p">)</span> <span class="nf">Transfer</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span> <span class="s">&#34;进行了 转账业务...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//支付业务
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">this</span> <span class="o">*</span><span class="nx">Banker</span><span class="p">)</span> <span class="nf">Pay</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span> <span class="s">&#34;进行了 支付业务...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">banker</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Banker</span><span class="p">{}</span>

        <span class="nx">banker</span><span class="p">.</span><span class="nf">Save</span><span class="p">()</span>
        <span class="nx">banker</span><span class="p">.</span><span class="nf">Transfer</span><span class="p">()</span>
        <span class="nx">banker</span><span class="p">.</span><span class="nf">Pay</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><p>代码很简单，就是一个银行业务员，他可能拥有很多的业务，比如<code>Save()</code>存款、<code>Transfer()</code>转账、<code>Pay()</code>支付等。那么如果这个业务员模块只有这几个方法还好，但是随着我们的程序写的越来越复杂，银行业务员可能就要增加方法，会导致业务员模块越来越臃肿。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAzOWUzYmM0Yzc1NDhkZTVlYjkwMjFjNTQzNTRmNzBfbEhxb2FORU40T3RKYzEzQ0J1enN1bEwxdHR1enI3Z0VfVG9rZW46Ym94Y25BeGZaNlN3ZjhjTW5NNDZIV2RVSzFiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAzOWUzYmM0Yzc1NDhkZTVlYjkwMjFjNTQzNTRmNzBfbEhxb2FORU40T3RKYzEzQ0J1enN1bEwxdHR1enI3Z0VfVG9rZW46Ym94Y25BeGZaNlN3ZjhjTW5NNDZIV2RVSzFiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAzOWUzYmM0Yzc1NDhkZTVlYjkwMjFjNTQzNTRmNzBfbEhxb2FORU40T3RKYzEzQ0J1enN1bEwxdHR1enI3Z0VfVG9rZW46Ym94Y25BeGZaNlN3ZjhjTW5NNDZIV2RVSzFiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAzOWUzYmM0Yzc1NDhkZTVlYjkwMjFjNTQzNTRmNzBfbEhxb2FORU40T3RKYzEzQ0J1enN1bEwxdHR1enI3Z0VfVG9rZW46Ym94Y25BeGZaNlN3ZjhjTW5NNDZIV2RVSzFiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTAzOWUzYmM0Yzc1NDhkZTVlYjkwMjFjNTQzNTRmNzBfbEhxb2FORU40T3RKYzEzQ0J1enN1bEwxdHR1enI3Z0VfVG9rZW46Ym94Y25BeGZaNlN3ZjhjTW5NNDZIV2RVSzFiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<p>这样的设计会导致，当我们去给Banker添加新的业务的时候，会直接修改原有的Banker代码，那么Banker模块的功能会越来越多，出现问题的几率也就越来越大，假如此时Banker已经有99个业务了，现在我们要添加第100个业务，可能由于一次的不小心，导致之前99个业务也一起崩溃，因为所有的业务都在一个Banker类里，他们的耦合度太高，Banker的职责也不够单一，代码的维护成本随着业务的复杂正比成倍增大。</p>
<h3 id="132-开闭原则设计">1.3.2 开闭原则设计</h3>
<p>那么，如果我们拥有接口, <code>interface</code>这个东西，那么我们就可以抽象一层出来，制作一个抽象的Banker模块，然后提供一个抽象的方法。 分别根据这个抽象模块，去实现<code>支付Banker（实现支付方法）</code>,<code>转账Banker（实现转账方法）</code> 如下：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UwYzRhMjhmYTU4ZTg0OTkzYTZjYTg0MDllMDE0YzFfZ0lsQnYwdFRvNkZEbmhmN3BkemtHdmZyV21rMmxoa0JfVG9rZW46Ym94Y25aQVBLNUYyVWNTM0E4T0xFUXVEZXdkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UwYzRhMjhmYTU4ZTg0OTkzYTZjYTg0MDllMDE0YzFfZ0lsQnYwdFRvNkZEbmhmN3BkemtHdmZyV21rMmxoa0JfVG9rZW46Ym94Y25aQVBLNUYyVWNTM0E4T0xFUXVEZXdkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UwYzRhMjhmYTU4ZTg0OTkzYTZjYTg0MDllMDE0YzFfZ0lsQnYwdFRvNkZEbmhmN3BkemtHdmZyV21rMmxoa0JfVG9rZW46Ym94Y25aQVBLNUYyVWNTM0E4T0xFUXVEZXdkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UwYzRhMjhmYTU4ZTg0OTkzYTZjYTg0MDllMDE0YzFfZ0lsQnYwdFRvNkZEbmhmN3BkemtHdmZyV21rMmxoa0JfVG9rZW46Ym94Y25aQVBLNUYyVWNTM0E4T0xFUXVEZXdkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=M2UwYzRhMjhmYTU4ZTg0OTkzYTZjYTg0MDllMDE0YzFfZ0lsQnYwdFRvNkZEbmhmN3BkemtHdmZyV21rMmxoa0JfVG9rZW46Ym94Y25aQVBLNUYyVWNTM0E4T0xFUXVEZXdkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<p>那么依然可以搞定程序的需求。 然后，当我们想要给Banker添加额外功能的时候，之前我们是直接修改Banker的内容，现在我们可以单独定义一个<code>股票Banker(实现股票方法)</code>，到这个系统中。 而且股票Banker的实现成功或者失败都不会影响之前的稳定系统，他很单一，而且独立。</p>
<p>所以以上，当我们给一个系统添加一个功能的时候，不是通过修改代码，而是通过增添代码来完成，那么就是开闭原则的核心思想了。所以要想满足上面的要求，是一定需要interface来提供一层抽象的接口的。</p>
<p>golang代码实现如下:</p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//抽象的银行业务员
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">AbstractBanker</span> <span class="kd">interface</span><span class="p">{</span>
        <span class="nf">DoBusi</span><span class="p">()</span>        <span class="c1">//抽象的处理业务接口
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">//存款的业务员
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">SaveBanker</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//AbstractBanker
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">sb</span> <span class="o">*</span><span class="nx">SaveBanker</span><span class="p">)</span> <span class="nf">DoBusi</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;进行了存款&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//转账的业务员
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">TransferBanker</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//AbstractBanker
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">tb</span> <span class="o">*</span><span class="nx">TransferBanker</span><span class="p">)</span> <span class="nf">DoBusi</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;进行了转账&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//支付的业务员
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">PayBanker</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//AbstractBanker
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">pb</span> <span class="o">*</span><span class="nx">PayBanker</span><span class="p">)</span> <span class="nf">DoBusi</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;进行了支付&#34;</span><span class="p">)</span>
<span class="p">}</span>


<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//进行存款
</span><span class="c1"></span>        <span class="nx">sb</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">SaveBanker</span><span class="p">{}</span>
        <span class="nx">sb</span><span class="p">.</span><span class="nf">DoBusi</span><span class="p">()</span>

        <span class="c1">//进行转账
</span><span class="c1"></span>        <span class="nx">tb</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">TransferBanker</span><span class="p">{}</span>
        <span class="nx">tb</span><span class="p">.</span><span class="nf">DoBusi</span><span class="p">()</span>
        
        <span class="c1">//进行支付
</span><span class="c1"></span>        <span class="nx">pb</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">PayBanker</span><span class="p">{}</span>
        <span class="nx">pb</span><span class="p">.</span><span class="nf">DoBusi</span><span class="p">()</span>

<span class="p">}</span>
</code></pre></div><p>当然我们也可以根据<code>AbstractBanker</code>设计一个小框架</p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// 实现架构层(基于抽象层进行业务封装-针对interface接口进行封装)
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">BankerBusiness</span><span class="p">(</span><span class="nx">banker</span> <span class="nx">AbstractBanker</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//通过接口来向下调用，(多态现象)
</span><span class="c1"></span>        <span class="nx">banker</span><span class="p">.</span><span class="nf">DoBusi</span><span class="p">()</span>
<span class="p">}</span>
<span class="c1">// 那么main中可以如下实现业务调用:
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//进行存款
</span><span class="c1"></span>        <span class="nf">BankerBusiness</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">SaveBanker</span><span class="p">{})</span>

        <span class="c1">//进行存款
</span><span class="c1"></span>        <span class="nf">BankerBusiness</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">TransferBanker</span><span class="p">{})</span>

        <span class="c1">//进行存款
</span><span class="c1"></span>        <span class="nf">BankerBusiness</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">PayBanker</span><span class="p">{})</span>
<span class="p">}</span> 
</code></pre></div><p>再看开闭原则定义: 开闭原则:一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。 简单的说就是在修改需求的时候，应该尽量通过扩展来实现变化，而不是通过修改已有代码来实现变化。</p>
<h3 id="133-接口的意义">1.3.3 接口的意义</h3>
<p>好了，现在interface已经基本了解，那么接口的意义最终在哪里呢，想必现在你已经有了一个初步的认知，实际上接口的最大的意义就是实现多态的思想，就是我们可以根据interface类型来设计API接口，那么这种API接口的适应能力不仅能适应当下所实现的全部模块，也适应未来实现的模块来进行调用。 <code>调用未来</code>可能就是接口的最大意义所在吧，这也是为什么架构师那么值钱，因为良好的架构师是可以针对interface设计一套框架，在未来许多年却依然适用。</p>
<h2 id="14-依赖倒转原则">1.4 依赖倒转原则</h2>
<h3 id="141--耦合度极高的模块关系设计">1.4.1  耦合度极高的模块关系设计</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRhMmVmNjFmMTBkZDBhZTA4YTIzYjUwYTg2ZjdlOGRfY0VOdnhSZERQaUJXT051OTdLWmh4VUdyYjhzMTBHa3dfVG9rZW46Ym94Y25ySFBJS3Q4dFd4Nmtwc044TXJ4SU1nXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRhMmVmNjFmMTBkZDBhZTA4YTIzYjUwYTg2ZjdlOGRfY0VOdnhSZERQaUJXT051OTdLWmh4VUdyYjhzMTBHa3dfVG9rZW46Ym94Y25ySFBJS3Q4dFd4Nmtwc044TXJ4SU1nXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRhMmVmNjFmMTBkZDBhZTA4YTIzYjUwYTg2ZjdlOGRfY0VOdnhSZERQaUJXT051OTdLWmh4VUdyYjhzMTBHa3dfVG9rZW46Ym94Y25ySFBJS3Q4dFd4Nmtwc044TXJ4SU1nXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRhMmVmNjFmMTBkZDBhZTA4YTIzYjUwYTg2ZjdlOGRfY0VOdnhSZERQaUJXT051OTdLWmh4VUdyYjhzMTBHa3dfVG9rZW46Ym94Y25ySFBJS3Q4dFd4Nmtwc044TXJ4SU1nXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OGRhMmVmNjFmMTBkZDBhZTA4YTIzYjUwYTg2ZjdlOGRfY0VOdnhSZERQaUJXT051OTdLWmh4VUdyYjhzMTBHa3dfVG9rZW46Ym94Y25ySFBJS3Q4dFd4Nmtwc044TXJ4SU1nXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">// === &gt; 奔驰汽车 &lt;===
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Benz</span> <span class="kd">struct</span> <span class="p">{</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">this</span> <span class="o">*</span><span class="nx">Benz</span><span class="p">)</span> <span class="nf">Run</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Benz is running...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// === &gt; 宝马汽车  &lt;===
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">BMW</span> <span class="kd">struct</span> <span class="p">{</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">this</span> <span class="o">*</span><span class="nx">BMW</span><span class="p">)</span> <span class="nf">Run</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;BMW is running ...&#34;</span><span class="p">)</span>
<span class="p">}</span>


<span class="c1">//===&gt; 司机张三  &lt;===
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Zhang3</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">zhang3</span> <span class="o">*</span><span class="nx">Zhang3</span><span class="p">)</span> <span class="nf">DriveBenZ</span><span class="p">(</span><span class="nx">benz</span> <span class="o">*</span><span class="nx">Benz</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;zhang3 Drive Benz&#34;</span><span class="p">)</span>
        <span class="nx">benz</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">zhang3</span> <span class="o">*</span><span class="nx">Zhang3</span><span class="p">)</span> <span class="nf">DriveBMW</span><span class="p">(</span><span class="nx">bmw</span> <span class="o">*</span><span class="nx">BMW</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;zhang3 drive BMW&#34;</span><span class="p">)</span>
        <span class="nx">bmw</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">//===&gt; 司机李四 &lt;===
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Li4</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">li4</span> <span class="o">*</span><span class="nx">Li4</span><span class="p">)</span> <span class="nf">DriveBenZ</span><span class="p">(</span><span class="nx">benz</span> <span class="o">*</span><span class="nx">Benz</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;li4 Drive Benz&#34;</span><span class="p">)</span>
        <span class="nx">benz</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">li4</span> <span class="o">*</span><span class="nx">Li4</span><span class="p">)</span> <span class="nf">DriveBMW</span><span class="p">(</span><span class="nx">bmw</span> <span class="o">*</span><span class="nx">BMW</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;li4 drive BMW&#34;</span><span class="p">)</span>
        <span class="nx">bmw</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//业务1 张3开奔驰
</span><span class="c1"></span>        <span class="nx">benz</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Benz</span><span class="p">{}</span>
        <span class="nx">zhang3</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Zhang3</span><span class="p">{}</span>
        <span class="nx">zhang3</span><span class="p">.</span><span class="nf">DriveBenZ</span><span class="p">(</span><span class="nx">benz</span><span class="p">)</span>

        <span class="c1">//业务2 李四开宝马
</span><span class="c1"></span>        <span class="nx">bmw</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">BMW</span><span class="p">{}</span>
        <span class="nx">li4</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Li4</span><span class="p">{}</span>
        <span class="nx">li4</span><span class="p">.</span><span class="nf">DriveBMW</span><span class="p">(</span><span class="nx">bmw</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>我们来看上面的代码和图中每个模块之间的依赖关系，实际上并没有用到任何的<code>interface</code>接口层的代码，显然最后我们的两个业务 <code>张三开奔驰</code>, <code>李四开宝马</code>，程序中也都实现了。但是这种设计的问题就在于，小规模没什么问题，但是一旦程序需要扩展，比如我现在要增加一个<code>丰田汽车</code> 或者 司机<code>王五</code>， 那么模块和模块的依赖关系将成指数级递增，想蜘蛛网一样越来越难维护和捋顺。</p>
<h3 id="142-面向抽象层依赖倒转">1.4.2 面向抽象层依赖倒转</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlNTE5NmQwODI1ZjY2NTM0M2IyNzY3MmM2NWY1YWVfSzJxbVdRVnhobXExU2E1dUNMOFZqSVNUb3pHUUEyOThfVG9rZW46Ym94Y25DampOUTVpVnpINVRhZ2M1anI3WVhjXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlNTE5NmQwODI1ZjY2NTM0M2IyNzY3MmM2NWY1YWVfSzJxbVdRVnhobXExU2E1dUNMOFZqSVNUb3pHUUEyOThfVG9rZW46Ym94Y25DampOUTVpVnpINVRhZ2M1anI3WVhjXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlNTE5NmQwODI1ZjY2NTM0M2IyNzY3MmM2NWY1YWVfSzJxbVdRVnhobXExU2E1dUNMOFZqSVNUb3pHUUEyOThfVG9rZW46Ym94Y25DampOUTVpVnpINVRhZ2M1anI3WVhjXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlNTE5NmQwODI1ZjY2NTM0M2IyNzY3MmM2NWY1YWVfSzJxbVdRVnhobXExU2E1dUNMOFZqSVNUb3pHUUEyOThfVG9rZW46Ym94Y25DampOUTVpVnpINVRhZ2M1anI3WVhjXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRlNTE5NmQwODI1ZjY2NTM0M2IyNzY3MmM2NWY1YWVfSzJxbVdRVnhobXExU2E1dUNMOFZqSVNUb3pHUUEyOThfVG9rZW46Ym94Y25DampOUTVpVnpINVRhZ2M1anI3WVhjXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<p>如上图所示，如果我们在设计一个系统的时候，将模块分为3个层次，抽象层、实现层、业务逻辑层。那么，我们首先将抽象层的模块和接口定义出来，这里就需要了<code>interface</code>接口的设计，然后我们依照抽象层，依次实现每个实现层的模块，在我们写实现层代码的时候，实际上我们只需要参考对应的抽象层实现就好了，实现每个模块，也和其他的实现的模块没有关系，这样也符合了上面介绍的开闭原则。这样实现起来每个模块只依赖对象的接口，而和其他模块没关系，依赖关系单一。系统容易扩展和维护。</p>
<p>我们在指定业务逻辑也是一样，只需要参考抽象层的接口来业务就好了，抽象层暴露出来的接口就是我们业务层可以使用的方法，然后可以通过多态的线下，接口指针指向哪个实现模块，调用了就是具体的实现方法，这样我们业务逻辑层也是依赖抽象成编程。</p>
<p>我们就将这种的设计原则叫做<code>依赖倒转原则</code>。</p>
<p>来一起看一下修改的代码：</p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">// ===== &gt;   抽象层  &lt; ========
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Car</span> <span class="kd">interface</span> <span class="p">{</span>
        <span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Driver</span> <span class="kd">interface</span> <span class="p">{</span>
        <span class="nf">Drive</span><span class="p">(</span><span class="nx">car</span> <span class="nx">Car</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// ===== &gt;   实现层  &lt; ========
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">BenZ</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">benz</span> <span class="o">*</span> <span class="nx">BenZ</span><span class="p">)</span> <span class="nf">Run</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Benz is running...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Bmw</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">bmw</span> <span class="o">*</span> <span class="nx">Bmw</span><span class="p">)</span> <span class="nf">Run</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Bmw is running...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Zhang_3</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">zhang3</span> <span class="o">*</span><span class="nx">Zhang_3</span><span class="p">)</span> <span class="nf">Drive</span><span class="p">(</span><span class="nx">car</span> <span class="nx">Car</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Zhang3 drive car&#34;</span><span class="p">)</span>
        <span class="nx">car</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Li_4</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">li4</span> <span class="o">*</span><span class="nx">Li_4</span><span class="p">)</span> <span class="nf">Drive</span><span class="p">(</span><span class="nx">car</span> <span class="nx">Car</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;li4 drive car&#34;</span><span class="p">)</span>
        <span class="nx">car</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
<span class="p">}</span>


<span class="c1">// ===== &gt;   业务逻辑层  &lt; ========
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//张3 开 宝马
</span><span class="c1"></span>        <span class="kd">var</span> <span class="nx">bmw</span> <span class="nx">Car</span>
        <span class="nx">bmw</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">Bmw</span><span class="p">{}</span>

        <span class="kd">var</span> <span class="nx">zhang3</span> <span class="nx">Driver</span>
        <span class="nx">zhang3</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">Zhang_3</span><span class="p">{}</span>

        <span class="nx">zhang3</span><span class="p">.</span><span class="nf">Drive</span><span class="p">(</span><span class="nx">bmw</span><span class="p">)</span>

        <span class="c1">//李4 开 奔驰
</span><span class="c1"></span>        <span class="kd">var</span> <span class="nx">benz</span> <span class="nx">Car</span>
        <span class="nx">benz</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">BenZ</span><span class="p">{}</span>

        <span class="kd">var</span> <span class="nx">li4</span> <span class="nx">Driver</span>
        <span class="nx">li4</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">Li_4</span><span class="p">{}</span>

        <span class="nx">li4</span><span class="p">.</span><span class="nf">Drive</span><span class="p">(</span><span class="nx">benz</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h3 id="143-合成复用原则">1.4.3 合成复用原则</h3>
<p>如果使用继承，会导致父类的任何变换都可能影响到子类的行为。如果使用对象组合，就降低了这种依赖关系。对于继承和组合，优先使用组合。</p>
<div class="highlight"><pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">Cat</span> <span class="kd">struct</span> <span class="p">{}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Cat</span><span class="p">)</span> <span class="nf">Eat</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;小猫吃饭&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//给小猫添加一个 可以睡觉的方法 （使用继承来实现）
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">CatB</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="nx">Cat</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">cb</span> <span class="o">*</span><span class="nx">CatB</span><span class="p">)</span> <span class="nf">Sleep</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;小猫睡觉&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//给小猫添加一个 可以睡觉的方法 （使用组合的方式）
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">CatC</span> <span class="kd">struct</span> <span class="p">{</span>
        <span class="nx">C</span> <span class="o">*</span><span class="nx">Cat</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">cc</span> <span class="o">*</span><span class="nx">CatC</span><span class="p">)</span> <span class="nf">Sleep</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;小猫睡觉&#34;</span><span class="p">)</span>
<span class="p">}</span>


<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//通过继承增加的功能，可以正常使用
</span><span class="c1"></span>        <span class="nx">cb</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">CatB</span><span class="p">)</span>
        <span class="nx">cb</span><span class="p">.</span><span class="nf">Eat</span><span class="p">()</span>
        <span class="nx">cb</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">()</span>

        <span class="c1">//通过组合增加的功能，可以正常使用
</span><span class="c1"></span>        <span class="nx">cc</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">CatC</span><span class="p">)</span>
        <span class="nx">cc</span><span class="p">.</span><span class="nx">C</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Cat</span><span class="p">)</span>
        <span class="nx">cc</span><span class="p">.</span><span class="nx">C</span><span class="p">.</span><span class="nf">Eat</span><span class="p">()</span>
        <span class="nx">cc</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><h3 id="144-迪米特法则">1.4.4 迪米特法则</h3>
<ol>
<li>和陌生人说话</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MDc4OWZkZDliNGNjOGFiY2UyOGVhMGQxYzI5ZTQzZjJfWTJuVVQ3WHhxZnl1SHM2VXI4dEpORk41NVpZZVJ4V2NfVG9rZW46Ym94Y25YU1dGNGdsbmhaYTd3YTZWaGN2WndlXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MDc4OWZkZDliNGNjOGFiY2UyOGVhMGQxYzI5ZTQzZjJfWTJuVVQ3WHhxZnl1SHM2VXI4dEpORk41NVpZZVJ4V2NfVG9rZW46Ym94Y25YU1dGNGdsbmhaYTd3YTZWaGN2WndlXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MDc4OWZkZDliNGNjOGFiY2UyOGVhMGQxYzI5ZTQzZjJfWTJuVVQ3WHhxZnl1SHM2VXI4dEpORk41NVpZZVJ4V2NfVG9rZW46Ym94Y25YU1dGNGdsbmhaYTd3YTZWaGN2WndlXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MDc4OWZkZDliNGNjOGFiY2UyOGVhMGQxYzI5ZTQzZjJfWTJuVVQ3WHhxZnl1SHM2VXI4dEpORk41NVpZZVJ4V2NfVG9rZW46Ym94Y25YU1dGNGdsbmhaYTd3YTZWaGN2WndlXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MDc4OWZkZDliNGNjOGFiY2UyOGVhMGQxYzI5ZTQzZjJfWTJuVVQ3WHhxZnl1SHM2VXI4dEpORk41NVpZZVJ4V2NfVG9rZW46Ym94Y25YU1dGNGdsbmhaYTd3YTZWaGN2WndlXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<ol>
<li>不和陌生人说话</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA0NTRhNzdiYjBmYWNiYTEzNmQ5NGNhM2U3M2RlZDBfNjRjWlVDQXJPVlZmY1FleDlFeHducnp5aDRrUlVsR3JfVG9rZW46Ym94Y25xM09lb29qVDNpSnhNcVFCOFFsaExkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA0NTRhNzdiYjBmYWNiYTEzNmQ5NGNhM2U3M2RlZDBfNjRjWlVDQXJPVlZmY1FleDlFeHducnp5aDRrUlVsR3JfVG9rZW46Ym94Y25xM09lb29qVDNpSnhNcVFCOFFsaExkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA0NTRhNzdiYjBmYWNiYTEzNmQ5NGNhM2U3M2RlZDBfNjRjWlVDQXJPVlZmY1FleDlFeHducnp5aDRrUlVsR3JfVG9rZW46Ym94Y25xM09lb29qVDNpSnhNcVFCOFFsaExkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA0NTRhNzdiYjBmYWNiYTEzNmQ5NGNhM2U3M2RlZDBfNjRjWlVDQXJPVlZmY1FleDlFeHducnp5aDRrUlVsR3JfVG9rZW46Ym94Y25xM09lb29qVDNpSnhNcVFCOFFsaExkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA0NTRhNzdiYjBmYWNiYTEzNmQ5NGNhM2U3M2RlZDBfNjRjWlVDQXJPVlZmY1FleDlFeHducnp5aDRrUlVsR3JfVG9rZW46Ym94Y25xM09lb29qVDNpSnhNcVFCOFFsaExkXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<ol>
<li>与依赖倒转原则结合 某人和 抽象陌生人说话  让某人和陌生人进行解耦合</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRiMThjNzQ0M2NjOWZmNDBlZGJlZmI2NTYzYTRmODBfMTYxWkNhV2lpVHBCSmVrNE4wUFU0UkY1aW5uMHhFcHZfVG9rZW46Ym94Y25veHE5UjdMandWbFdNcW9XdndDaENiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        data-srcset="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRiMThjNzQ0M2NjOWZmNDBlZGJlZmI2NTYzYTRmODBfMTYxWkNhV2lpVHBCSmVrNE4wUFU0UkY1aW5uMHhFcHZfVG9rZW46Ym94Y25veHE5UjdMandWbFdNcW9XdndDaENiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRiMThjNzQ0M2NjOWZmNDBlZGJlZmI2NTYzYTRmODBfMTYxWkNhV2lpVHBCSmVrNE4wUFU0UkY1aW5uMHhFcHZfVG9rZW46Ym94Y25veHE5UjdMandWbFdNcW9XdndDaENiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 1.5x, https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRiMThjNzQ0M2NjOWZmNDBlZGJlZmI2NTYzYTRmODBfMTYxWkNhV2lpVHBCSmVrNE4wUFU0UkY1aW5uMHhFcHZfVG9rZW46Ym94Y25veHE5UjdMandWbFdNcW9XdndDaENiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA 2x"
        data-sizes="auto"
        alt="https://cyetdnpf4c.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRiMThjNzQ0M2NjOWZmNDBlZGJlZmI2NTYzYTRmODBfMTYxWkNhV2lpVHBCSmVrNE4wUFU0UkY1aW5uMHhFcHZfVG9rZW46Ym94Y25veHE5UjdMandWbFdNcW9XdndDaENiXzE2NjUzMjE4NTg6MTY2NTMyNTQ1OF9WNA"
        title="img" /></p>
<hr>
<p>该系列文章学习于刘丹冰老师著作</p>
<p>原文链接：https://www.yuque.com/aceld/lfhu8y/ckdht9#ySOW4</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2022-09-22</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" data-title="设计模式(01)-面向对象设计原则" data-via="an_jinc" data-hashtags="设计模式,面向对象,抽象"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" data-hashtag="设计模式"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" data-title="设计模式(01)-面向对象设计原则"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" data-title="设计模式(01)-面向对象设计原则"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://example.org/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" data-title="设计模式(01)-面向对象设计原则"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>,&nbsp;<a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a>,&nbsp;<a href="/tags/%E6%8A%BD%E8%B1%A1/">抽象</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%8F%89%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AF%87/" class="prev" rel="prev" title="数据结构算法 二叉树学习篇"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>数据结构算法 二叉树学习篇</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Alen学无止境</div><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.83.1">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Alen</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href="https://beian.miit.gov.cn/shouye.html" target="_blank">桂ICP备2022006375号-1</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"data":{"id-1":"Alen-学无止境","id-2":"Alen-学无止境"},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
